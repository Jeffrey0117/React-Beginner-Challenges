# 01-02 - setStateé€£çºŒå‘¼å«é€™éº¼å¤šæ¬¡ï¼Œæ€Žéº¼åªä½œç”¨ä¸€æ¬¡ï¼Ÿ

## ðŸŽ¯ é¡Œç›®ï¼šReact çš„æ‰¹æ¬¡æ›´æ–°èˆ‡é–‰åŒ…é™·é˜±

### å•é¡Œæè¿°
é€£çºŒå‘¼å« 5 æ¬¡ `setCount(count + 1)`ï¼Œç‚ºä»€éº¼æœ€çµ‚åªå¢žåŠ äº† 1 è€Œä¸æ˜¯ 5ï¼Ÿ

### ðŸ”´ å•é¡Œç¨‹å¼ç¢¼
```jsx
const [count, setCount] = useState(0)

const handleMultipleUpdates = () => {
  setCount(count + 1)  // count = 0, è¨­å®šç‚º 1
  setCount(count + 1)  // count = 0, è¨­å®šç‚º 1 (é‚„æ˜¯èˆŠå€¼ï¼)
  setCount(count + 1)  // count = 0, è¨­å®šç‚º 1 (é‚„æ˜¯èˆŠå€¼ï¼)
  setCount(count + 1)  // count = 0, è¨­å®šç‚º 1 (é‚„æ˜¯èˆŠå€¼ï¼)
  setCount(count + 1)  // count = 0, è¨­å®šç‚º 1 (é‚„æ˜¯èˆŠå€¼ï¼)
  console.log(count)   // é‚„æ˜¯ 0ï¼
}
```

**æª”æ¡ˆä½ç½®ï¼š** [`problem/App.jsx`](problem/App.jsx)

### ðŸŸ¢ è§£æ±ºæ–¹æ¡ˆ

#### âœ… æ–¹æ³•1ï¼šä½¿ç”¨å‡½æ•¸å¼æ›´æ–°ï¼ˆæŽ¨è–¦ï¼‰
```jsx
const handleMultipleUpdates = () => {
  setCount(prevCount => prevCount + 1)  // åŸºæ–¼å‰ä¸€å€‹å€¼
  setCount(prevCount => prevCount + 1)  // åŸºæ–¼å‰ä¸€å€‹å€¼
  setCount(prevCount => prevCount + 1)  // åŸºæ–¼å‰ä¸€å€‹å€¼
  setCount(prevCount => prevCount + 1)  // åŸºæ–¼å‰ä¸€å€‹å€¼
  setCount(prevCount => prevCount + 1)  // åŸºæ–¼å‰ä¸€å€‹å€¼
  // æœ€çµ‚çµæžœï¼š5
}
```

#### âœ… æ–¹æ³•2ï¼šä¸€æ¬¡æ€§è¨ˆç®—ï¼ˆæœ€ä½³è§£æ³•ï¼‰
```jsx
const handleMultipleUpdates = () => {
  setCount(count + 5)  // ç›´æŽ¥åŠ 5
}
```

**æª”æ¡ˆä½ç½®ï¼š** [`solution/App.jsx`](solution/App.jsx)

### ðŸ§  åŽŸç†è§£é‡‹

#### **å•é¡Œ1ï¼šé–‰åŒ…é™·é˜±**
```jsx
const [count, setCount] = useState(0)  // count = 0

const handleClick = () => {
  // é€™å€‹å‡½æ•¸é–‰åŒ…æ•ç²äº†ç•¶å‰çš„ count å€¼ (0)
  setCount(count + 1)  // å¯¦éš›ä¸Šæ˜¯ setCount(0 + 1)
  setCount(count + 1)  // å¯¦éš›ä¸Šæ˜¯ setCount(0 + 1)
  setCount(count + 1)  // å¯¦éš›ä¸Šæ˜¯ setCount(0 + 1)
  // æœ€å¾Œä¸€å€‹æœƒè¦†è“‹å‰é¢çš„ï¼Œçµæžœé‚„æ˜¯ 1
}
```

#### **å•é¡Œ2ï¼šReact çš„æ‰¹æ¬¡æ›´æ–°**
- React æœƒå°‡åŒä¸€å€‹äº‹ä»¶è™•ç†å™¨ä¸­çš„å¤šå€‹ setState æ‰¹æ¬¡è™•ç†
- ç›¸åŒçš„ç‹€æ…‹æ›´æ–°æœƒè¢«åˆä½µï¼Œå¾Œé¢çš„è¦†è“‹å‰é¢çš„

#### **è§£æ±ºåŽŸç†ï¼šå‡½æ•¸å¼æ›´æ–°**
```jsx
setCount(prevCount => prevCount + 1)
// React å…§éƒ¨æœƒé€™æ¨£åŸ·è¡Œï¼š
// ç¬¬1æ¬¡ï¼šprevCount = 0 â†’ è¿”å›ž 1
// ç¬¬2æ¬¡ï¼šprevCount = 1 â†’ è¿”å›ž 2  
// ç¬¬3æ¬¡ï¼šprevCount = 2 â†’ è¿”å›ž 3
// ...ä¾æ­¤é¡žæŽ¨
```

### ðŸ“š å­¸ç¿’é‡é»ž
- **é–‰åŒ…èˆ‡ç‹€æ…‹**ï¼šå‡½æ•¸é–‰åŒ…æœƒæ•ç²ç•¶å‰çš„ç‹€æ…‹å€¼
- **æ‰¹æ¬¡æ›´æ–°**ï¼šReact æœƒåˆä½µåŒä¸€äº‹ä»¶ä¸­çš„å¤šå€‹ setState
- **å‡½æ•¸å¼æ›´æ–°**ï¼š`setState(prev => newValue)` ç¢ºä¿åŸºæ–¼æœ€æ–°å€¼æ›´æ–°
- **useState çš„ç•°æ­¥æ€§**ï¼šsetState å¾Œç«‹å³è®€å–ç‹€æ…‹é‚„æ˜¯èˆŠå€¼

### ðŸš€ æ¸¬è©¦æ­¥é©Ÿ
1. è¤‡è£½ `problem/App.jsx` åˆ°ä¸»å°ˆæ¡ˆçš„ `src/App.jsx`
2. é»žæ“Š "+5" æŒ‰éˆ•ï¼Œè§€å¯Ÿåªå¢žåŠ äº† 1
3. æ‰“é–‹é–‹ç™¼è€…å·¥å…·æŸ¥çœ‹ console è¼¸å‡º
4. è¤‡è£½ `solution/App.jsx` åˆ°ä¸»å°ˆæ¡ˆçš„ `src/App.jsx`
5. æ¸¬è©¦ä¸åŒçš„è§£æ±ºæ–¹æ¡ˆï¼Œè§€å¯Ÿå·®ç•°

### ðŸ’¡ å¯¦ç”¨æŠ€å·§
```jsx
// âŒ éŒ¯èª¤ï¼šåŸºæ–¼èˆŠå€¼çš„å¤šæ¬¡æ›´æ–°
setCount(count + 1)
setCount(count + 1)

// âœ… æ­£ç¢ºï¼šå‡½æ•¸å¼æ›´æ–°
setCount(prev => prev + 1)
setCount(prev => prev + 1)

// âœ… æ›´å¥½ï¼šä¸€æ¬¡æ€§è¨ˆç®—
setCount(count + 2)

// âœ… è¤‡é›œé‚è¼¯ï¼šå¯ä»¥åœ¨å‡½æ•¸ä¸­è™•ç†
setCount(prev => {
  const newValue = prev + someComplexCalculation()
  console.log('æ›´æ–°ç‚º:', newValue)
  return newValue
})
```
